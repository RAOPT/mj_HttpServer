# myHttpServer
# 总体结构
## 线程池类 class TheadPool

# 注意事项

每个**使用ET模式**的文件描述符都应该是**非阻塞**的。如果文件描述符是阻塞的，那么读或写操作将会因为没有后续的事件而一直处于阻塞状态（饥渴状态）

# 问题
## 关闭客户端链接时行为不正常

**Q**

使用close函数关闭时，服务器直接发送的RST包，浏览器显示连接被重置。

调用shotdown才能发出FIN包，但少了一次来自客户端的挥手确认，但浏览器显示正常

**原因**

在接受缓冲区没有被读完时，调用close()关闭套接字就会触发RST包

**解决方案**

在关闭之前清空接收缓冲区。没有专门清空缓冲区的系统调用，因此需要在用户态实现这个功能。

目前已经可以正常关闭了。但是用tcpdump观察是看不到从客户端发回的对服务器FIN报文的确认报文。（和之前调用showdown时的表象相同）